<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>Angol szókvíz</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Adatbazis kviz</h1>
  <p>Mi az angol megfelelője ennek a szónak?</p>
  <h2 id="word">–</h2>
  <input type="text" id="answer" placeholder="Írd be az angol szót" autocomplete="off" />
  <div style="text-align:center;">
    <button onclick="checkAnswer()">Ellenőrzés</button>
    <button onclick="nextWord()">Következő szó</button>
  </div>
  <p id="result"></p>

  <script>
    let glossary = {};
    let words = [];
    let current = 0;

    async function loadGlossary() {
      try {
        const response = await fetch('glossary.json');
        glossary = await response.json();
        words = Object.entries(glossary);
        nextWord();
      } catch (error) {
        console.error('Nem sikerült betölteni a glossary.json fájlt:', error);
        document.getElementById('result').textContent = 'Nem sikerült betölteni az adatokat.';
        document.getElementById('result').className = 'error';
      }
    }

    function nextWord() {
      if(words.length === 0) return;
      const index = Math.floor(Math.random() * words.length);
      current = index;
      document.getElementById("word").textContent = words[index][0];
      document.getElementById("answer").value = "";
      const result = document.getElementById("result");
      result.textContent = "";
      result.className = "";
      document.getElementById("answer").focus();
    }

    function checkAnswer() {
      if(words.length === 0) return;
      const userInput = document.getElementById("answer").value.trim().toLowerCase();
      const correct = words[current][1].toLowerCase();
      const result = document.getElementById("result");

      if (!userInput) {
        result.textContent = "Kérlek, írj be valamit!";
        result.className = "error";
        return;
      }

      if (userInput === correct) {
        result.textContent = "✅ Helyes!";
        result.className = "success";
      } else {
        result.textContent = `❌ Helytelen! A helyes válasz: ${words[current][1]}`;
        result.className = "error";
      }
    }

    window.onload = loadGlossary;
  </script>
</body>
</html>
